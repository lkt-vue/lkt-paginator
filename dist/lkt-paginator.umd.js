(function(e,o){typeof exports=="object"&&typeof module<"u"?module.exports=o(require("vue"),require("lkt-data-state"),require("lkt-http-client")):typeof define=="function"&&define.amd?define(["vue","lkt-data-state","lkt-http-client"],o):(e=typeof globalThis<"u"?globalThis:e||self,e.LktPaginator=o(e.Vue,e.lktDataState,e.LktHttpClient))})(this,function(e,o,u){"use strict";var U=Object.defineProperty;var w=(e,o,u)=>o in e?U(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u;var m=(e,o,u)=>(w(e,typeof o!="symbol"?o+"":o,u),u);class d{}m(d,"FIRST_BUTTON_NAME","First"),m(d,"PREV_BUTTON_NAME","Prev"),m(d,"NEXT_BUTTON_NAME","Next"),m(d,"LATEST_BUTTON_NAME","Latest");const y={name:"LktPaginator",inheritAttrs:!1},_=e.defineComponent({...y,props:{modelValue:{type:Number,default:1},resource:{type:String,default:""},palette:{type:String,default:""},readOnly:{type:Boolean,default:!1},filters:{type:Object,default(){return{}}}},emits:["update:modelValue","loading","results","error"],setup(s,{emit:n}){const N=n,i=s,r=e.ref(i.modelValue),p=e.ref(1),h=e.computed(()=>d.FIRST_BUTTON_NAME),V=e.computed(()=>d.PREV_BUTTON_NAME),O=e.computed(()=>d.NEXT_BUTTON_NAME),x=e.computed(()=>d.LATEST_BUTTON_NAME),C=e.computed(()=>{let a=[],c=r.value-1,t=c-5;t<0&&(t=0);for(let l=c;l>t;--l)a.push(l);return a=a.reverse(),a}),S=e.computed(()=>{let a=[],c=r.value+5;c>p.value&&(c=p.value);for(let t=r.value+1;t<=c;++t)a.push(t);return a}),k=e.computed(()=>r.value>=p.value),B=e.computed(()=>r.value<=1),A=e.computed(()=>{const a=["lkt-paginator"];return i.palette&&a.push(`lkt-paginator--${i.palette}`),i.readOnly&&a.push("lkt-paginator--read-only"),a.push(!!i.modelValue&&i.modelValue>0?"is-filled":"is-empty"),a.join(" ")}),g=(a,c)=>{let t={};typeof a=="object"&&Object.keys(a).length>0&&(t=JSON.parse(JSON.stringify(a)));for(let l in t)(Array.isArray(t[l])||typeof t[l]=="object")&&(t[l]=JSON.stringify(t[l]));return t.page=c,t};let f=new o.DataState(g(i.filters,0));r.value>0&&f.increment({page:r.value});const T=()=>{if(i.readOnly||!f.changed())return;let a=f.getData();N("loading");let c=u.getHTTPResource(i.resource);u.httpCall(i.resource,a).then(t=>{let l=c.getLatestMaxPage();l>-1&&(p.value=l),f.turnStoredIntoOriginal(),N("results",t)}).catch(t=>{N("error",t)})},P=()=>++r.value,b=()=>r.value=p.value,M=()=>--r.value,L=()=>r.value=1,E=a=>r.value=a;return e.watch(()=>i.modelValue,a=>{r.value=parseInt(a)}),e.watch(r,a=>{f.increment({page:a}),N("update:modelValue",r.value),T()}),e.watch(()=>i.filters,a=>{f.store(g(a,r.value)),T()}),i.readOnly||T(),(a,c)=>{const t=e.resolveComponent("lkt-button");return p.value>1?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(A.value)},[e.createVNode(t,{onClick:L,disabled:B.value,"data-role":"first",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(h.value),1)]),_:1},8,["disabled","palette"]),e.createVNode(t,{onClick:M,disabled:B.value,"data-role":"prev",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(V.value),1)]),_:1},8,["disabled","palette"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,l=>(e.openBlock(),e.createBlock(t,{key:l,onClick:()=>{E(l)},"data-role":"page",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(l),1)]),_:2},1032,["onClick","palette"]))),128)),e.createVNode(t,{disabled:"","data-role":"page",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(r.value),1)]),_:1},8,["palette"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,l=>(e.openBlock(),e.createBlock(t,{key:l,onClick:()=>{E(l)},"data-role":"page",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(l),1)]),_:2},1032,["onClick","palette"]))),128)),e.createVNode(t,{onClick:P,disabled:k.value,"data-role":"next",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(O.value),1)]),_:1},8,["disabled","palette"]),e.createVNode(t,{onClick:b,disabled:k.value,"data-role":"latest",palette:s.palette},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(x.value),1)]),_:1},8,["disabled","palette"])],2)):e.createCommentVNode("",!0)}}});return{install:(s,n)=>{s.component("lkt-paginator",_),n&&n.firstButtonName&&(d.FIRST_BUTTON_NAME=n.firstButtonName),n&&n.prevButtonName&&(d.PREV_BUTTON_NAME=n.prevButtonName),n&&n.nextButtonName&&(d.NEXT_BUTTON_NAME=n.nextButtonName),n&&n.latestButtonName&&(d.LATEST_BUTTON_NAME=n.latestButtonName)}}});
